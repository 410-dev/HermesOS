#!/bin/bash
export OS_Version="$(regread SYSTEM/Profile/ProductVersion/VersionMajor).$(regread SYSTEM/Profile/ProductVersion/VersionMinor)"
export OS_Version_Major="$(regread SYSTEM/Profile/ProductVersion/VersionMajor)"
export OS_Version_Minor="$(regread SYSTEM/Profile/ProductVersion/VersionMinor)"
export OS_Build="$(regread SYSTEM/Profile/ProductVersion/BuildNumber)"
export OS_Name="$(regread SYSTEM/Profile/ProductVersion/ProductName)"
export OS_Tag="$(regread SYSTEM/Profile/ProductVersion/BuildTag)"
export OS_Vendor="$(regread SYSTEM/Profile/ProductVersion/Vendor)"
export OS_InterfaceVersion="$OS_Version"
export OS_CopyrightStatement="$(regread SYSTEM/Profile/ProductVersion/Copyright)"

mkdir -p "$NVRAM/security"

if [[ ! -f "$NVRAM/security/lockstate" ]]; then
	sys_log "Profile" "Lock state set to locked (Default)"
	echo "Locked" > "$NVRAM/security/lockstate"
fi
if [[ ! -f "$NVRAM/security/prosys" ]]; then
	sys_log "Profile" "System mode set to Default (Default)"
	echo "Default" > "$NVRAM/security/prosys"
fi

export OS_UnlockedDistro="$(<"$NVRAM/security/lockstate")"
export OS_ProSystemStatus="$(<"$NVRAM/security/prosys")"

export SDK_COMPATIBILITY="1"